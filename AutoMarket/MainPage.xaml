<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
<<<<<<< Updated upstream
             x:Class="AutoMarket.MainPage"
             BackgroundColor="White"
             Title="Головна">

    <Grid>
        <Label Text="Тут вміст головної сторінки"
               FontSize="18"
               VerticalOptions="Center"
               HorizontalOptions="Center" />
    </Grid>
=======
             xmlns:viewModels="clr-namespace:AutoMarket.ViewModel"
             xmlns:models="clr-namespace:AutoMarket.Models"
             x:Class="AutoMarket.MainPage"
             BackgroundColor="#F5F5F5"
             Title="Головна">

    <ContentPage.Resources>
        <Style x:Key="FilterBorderStyle" TargetType="Border">
            <Setter Property="Stroke" Value="#E0E0E0"/>
            <Setter Property="StrokeThickness" Value="1"/>
            <Setter Property="StrokeShape" Value="RoundRectangle 10"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="BackgroundColor" Value="White"/>
            <Setter Property="HeightRequest" Value="50"/>
        </Style>
        <Style x:Key="FilterLabelStyle" TargetType="Label">
            <Setter Property="TextColor" Value="#333333"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="VerticalOptions" Value="Center"/>
        </Style>
        <Style x:Key="ChevronStyle" TargetType="Label">
            <Setter Property="Text" Value=">"/>
            <Setter Property="TextColor" Value="#999999"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="HorizontalOptions" Value="End"/>
            <Setter Property="VerticalOptions" Value="Center"/>
        </Style>
    </ContentPage.Resources>

    <CollectionView ItemsSource="{Binding Listings}"
                    SelectionMode="None">

        <CollectionView.Header>
            <VerticalStackLayout Padding="20" Spacing="15" BackgroundColor="#F5F5F5">

                <Border StrokeThickness="0" BackgroundColor="#EEEEEE" StrokeShape="RoundRectangle 8" HeightRequest="40" Padding="2">
                    <Grid ColumnDefinitions="*,*,*">
                        <Label Grid.Column="0" Text="Всі" HorizontalOptions="Center" VerticalOptions="Center" TextColor="Black"/>
                        <Label Grid.Column="1" Text="Вживані" HorizontalOptions="Center" VerticalOptions="Center" TextColor="#777777"/>
                        <Label Grid.Column="2" Text="Нові" HorizontalOptions="Center" VerticalOptions="Center" TextColor="#777777"/>
                    </Grid>
                </Border>

                <Grid RowDefinitions="Auto, Auto, Auto, Auto, Auto" ColumnDefinitions="*,*" RowSpacing="12" ColumnSpacing="12">
                    <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectTypeCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedTypeName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="1" Grid.Column="0" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectBrandCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedBrandName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectModelCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedModelName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="2" Grid.Column="0" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectYearCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedYearText}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="2" Grid.Column="1" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectPriceCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedPriceText}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="3" Grid.Column="0" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectRegionCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedRegionName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="3" Grid.Column="1" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectCityCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedCityName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="4" Grid.Column="0" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectFuelCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedFuelName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                    <Border Grid.Row="4" Grid.Column="1" Style="{StaticResource FilterBorderStyle}">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SelectGearCommand}"/>
                        </Border.GestureRecognizers>
                        <Grid>
                            <Label Text="{Binding SelectedGearName}" Style="{StaticResource FilterLabelStyle}"/>
                            <Label Style="{StaticResource ChevronStyle}"/>
                        </Grid>
                    </Border>
                </Grid>

                <Label Text="Скинути фільтри"
                       TextColor="#999999"
                       FontSize="14"
                       TextDecorations="Underline"
                       HorizontalOptions="Center"
                       Margin="0,5,0,-5">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding ResetFiltersCommand}"/>
                    </Label.GestureRecognizers>
                </Label>

                <Button Text="Шукати"
                        Command="{Binding SearchCommand}" 
                        BackgroundColor="#E53935"
                        TextColor="White"
                        FontAttributes="Bold"
                        FontSize="18"
                        CornerRadius="8"
                        HeightRequest="55"
                        Margin="0,10,0,10"/>    

            </VerticalStackLayout>
        </CollectionView.Header>

        <CollectionView.ItemTemplate>
            <DataTemplate x:DataType="models:CarListing">
                <VerticalStackLayout Padding="20, 0, 20, 15">
                    <Border StrokeShape="RoundRectangle 12" 
                    BackgroundColor="White" 
                    Stroke="#E0E0E0" 
                    StrokeThickness="1">

                        <Grid RowDefinitions="200, Auto" BackgroundColor="White">

                            <Grid Grid.Row="0">
                                <Image Source="{Binding CurrentPhotoUrl}" 
                                     Aspect="AspectFill" 
                                     HeightRequest="200"/>

                                <ImageButton 
                                     Command="{Binding PrevPhotoCommand}"
                                     IsVisible="{Binding HasMultiplePhotos}"
                                     HorizontalOptions="Start"
                                     VerticalOptions="Center"
                                     BackgroundColor="#80000000" 
                                     CornerRadius="20"
                                     HeightRequest="40"
                                     WidthRequest="40"
                                     Margin="10,0,0,0"
                                     Padding="10">  
                                    <ImageButton.Source>
                                        <FontImageSource Glyph="&lt;" Color="White" Size="5" FontFamily="OpenSansSemibold"/>
                                    </ImageButton.Source>
                                </ImageButton>

                                <ImageButton Command="{Binding NextPhotoCommand}"
                                     IsVisible="{Binding HasMultiplePhotos}"
                                     HorizontalOptions="End"
                                     VerticalOptions="Center"
                                     BackgroundColor="#80000000" 
                                     CornerRadius="20"
                                     HeightRequest="40"
                                     WidthRequest="40"
                                     Margin="0,0,10,0"
                                     Padding="10">  
                                    <ImageButton.Source>
                                        <FontImageSource Glyph="&gt;" Color="White" Size="5" FontFamily="OpenSansSemibold"/>
                                    </ImageButton.Source>
                                </ImageButton>
                            </Grid>

                            <StackLayout Grid.Row="1" Padding="15">
                                <HorizontalStackLayout Spacing="5" Margin="0,0,0,5">
                                    <Border BackgroundColor="#333333" StrokeThickness="0" Padding="5,2" StrokeShape="RoundRectangle 4">
                                        <HorizontalStackLayout Spacing="3">
                                            <Label Text="✓" TextColor="White" FontSize="10"/>
                                            <Label Text="Перевірений VIN" TextColor="White" FontSize="10" FontAttributes="Bold"/>
                                        </HorizontalStackLayout>
                                    </Border>
                                    <Border BackgroundColor="White" Stroke="Black" StrokeThickness="1" Padding="0" StrokeShape="RoundRectangle 4" WidthRequest="80">
                                        <Grid ColumnDefinitions="15, *">
                                            <BoxView Grid.Column="0" Color="#0057B8"/>
                                            <BoxView Grid.Column="0" Color="#FFD700" VerticalOptions="End" HeightRequest="10"/>
                                            <Label Grid.Column="1" Text="{Binding LicensePlate}" TextColor="Black" FontSize="11" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center"/>
                                        </Grid>
                                    </Border>
                                </HorizontalStackLayout>

                                <Label Text="{Binding FullTitle}" TextColor="Black" FontSize="18" FontAttributes="Bold"/>

                                <HorizontalStackLayout Spacing="8" Margin="0,5">
                                    <Label Text="{Binding PriceUsdFormatted}" TextColor="#4CAF50" FontSize="20" FontAttributes="Bold"/>
                                    <Label Text="•" TextColor="Gray"/>
                                    <Label Text="{Binding PriceUahFormatted}" TextColor="Gray" FontSize="14" VerticalOptions="Center"/>
                                </HorizontalStackLayout>

                                <Grid ColumnDefinitions="*,*,*" Margin="0,5">
                                    <HorizontalStackLayout Grid.Column="0" Spacing="5">
                                        <Label Text="⏱" TextColor="Gray"/>
                                        <Label Text="{Binding Mileage, StringFormat='{0} км'}" TextColor="Black" FontSize="12"/>
                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout Grid.Column="1" Spacing="5">
                                        <Label Text="⛽" TextColor="Gray"/>
                                        <Label Text="{Binding FuelType}" TextColor="Black" FontSize="12"/>
                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout Grid.Column="2" Spacing="5">
                                        <Label Text="⚙️" TextColor="Gray"/>
                                        <Label Text="{Binding GearType}" TextColor="Black" FontSize="12"/>
                                    </HorizontalStackLayout>
                                </Grid>

                                <HorizontalStackLayout Spacing="5" Margin="0,5,0,0">
                                    <Label Text="📍" TextColor="Gray"/>
                                    <Label Text="{Binding City}" TextColor="Black" FontSize="13"/>
                                </HorizontalStackLayout>
                            </StackLayout>
                        </Grid>
                    </Border>
                </VerticalStackLayout>
            </DataTemplate>
        </CollectionView.ItemTemplate>
>>>>>>> Stashed changes

    </CollectionView>
</ContentPage>