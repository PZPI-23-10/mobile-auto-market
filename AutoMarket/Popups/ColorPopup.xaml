<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               xmlns:models="clr-namespace:AutoMarket.Models"
               x:Class="AutoMarket.Popups.ColorPopup">
    <Border x:Name="MainBorder" BackgroundColor="White" StrokeShape="RoundRectangle 20,20,0,0" VerticalOptions="End" HorizontalOptions="Fill">
        <Grid RowDefinitions="Auto, *">
            <Grid Grid.Row="0" ColumnDefinitions="*, Auto" Padding="20,15">
                <Label Text="Оберіть колір" FontAttributes="Bold" FontSize="18" TextColor="Black" VerticalOptions="Center"/>
                <Button Grid.Column="1" Text="X" BackgroundColor="Transparent" TextColor="Black" Clicked="OnCloseButtonClicked"/>
            </Grid>
            <CollectionView Grid.Row="1" ItemsSource="{Binding Colors}" SelectionMode="Single" SelectionChanged="OnSelectionChanged">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:ColorDto">
                        <Border Padding="15,10" StrokeThickness="0" BackgroundColor="Transparent">
                            <Grid ColumnDefinitions="30, *">
                                <Border Grid.Column="0" 
                                        BackgroundColor="{Binding ColorValue}" 
                                        Stroke="Gray" StrokeThickness="1"
                                        HeightRequest="24" WidthRequest="24" 
                                        StrokeShape="RoundRectangle 12" 
                                        VerticalOptions="Center"/>

                                <Label Grid.Column="1" Text="{Binding Name}" FontSize="16" TextColor="Black" VerticalOptions="Center" Margin="15,0,0,0"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </Border>
</toolkit:Popup>